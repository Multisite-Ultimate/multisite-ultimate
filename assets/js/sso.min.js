(n=>{window.wu=window.wu||{},window.is_incognito=!1,window.wu.sso_denied=function(){wu_create_cookie("wu_sso_denied",1,n.expiration_in_minutes)},window.wu.check_for_incognito_window=function(){detectIncognito(e=>window.is_incognito=e.isPrivate)},window.wu.check_for_incognito_window(),window.addEventListener("error",wu.sso_denied,!0);var e=document.createElement("script"),o=(e.type="text/javascript",e.async=!0,e.defer=!0,e.src=n.server_url+"?_jsonp=1",wu_read_cookie("wu_sso_denied"));document.head.insertAdjacentHTML("beforeend",`
    <style>
      @keyframes fade_in {
        from { opacity: 0; }
        to   { opacity: 1; }
      }
      body.sso-loading {
        overflow: hidden;
      }
      body.sso-loading .sso-overlay {
        background: rgba(0, 0, 0, 0.7);
        width: 100vw;
        height: 100vh;
        position: absolute;
        top: 0;
        -webkit-animation: fade_in 300ms;
        -moz-animation: fade_in 300ms;
        -ms-animation: fade_in 300ms;
        -o-animation: fade_in 300ms;
        animation: fade_in 300ms;
      }
      body.sso-loading .sso-overlay::before {
        content: "";
        display: block;
        width: 20px;
        height: 20px;
        position: absolute;
        left: 50%;
        top: 50%;
        margin: -10px 0 0 -10px;
        transform: translateZ(0);
        background: transparent url(${n.img_folder}/spinner.gif) no-repeat center center;
        background-image: url(${n.img_folder}/loader.svg);
        background-size: 20px 20px;
      }
    </style>
  `),n.is_user_logged_in||o||((o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,o),document.body.insertAdjacentHTML("beforeend",'<div class="sso-overlay">&nbsp;</div>')),window.wu.sso=function(e){var o=encodeURIComponent(window.location.href);200===e.code?(n.use_overlay&&document.body.classList.add("sso-loading"),"must-redirect"===e.verify?window.location.replace(n.server_url+"?return_url="+o):window.location.replace(`${n.server_url}?sso_verify=${e.verify}&return_url=`+o)):window.is_incognito?(n.use_overlay&&document.body.classList.add("sso-loading"),window.location.replace(n.server_url+"?return_url="+o)):(window.wu.sso_denied(),document.body.classList.remove("sso-loading"))},window.history.replaceState&&window.history.replaceState(null,null,n.filtered_url+window.location.hash)})(wu_sso_config);
