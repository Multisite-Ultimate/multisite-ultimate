(w=>{var e=new Vue({el:"#coupon-code-app",data:{coupon_id:"",coupon:wu_coupon_data.coupon,type:wu_coupon_data.type,value:parseFloat(wu_coupon_data.value),applies_to_setup_fee:wu_coupon_data.applies_to_setup_fee,setup_fee_discount_value:parseFloat(wu_coupon_data.setup_fee_discount_value),setup_fee_discount_type:wu_coupon_data.setup_fee_discount_type,allowed_plans:wu_coupon_data.allowed_plans,allowed_freqs:wu_coupon_data.allowed_freqs,success:!1},mounted:function(){this.apply_coupon(),this.add_event_tabs()},methods:{add_event_tabs:function(){w(".wu-plans-frequency-selector li a").each(function(){this.addEventListener("click",function(){e.apply_coupon()})})},apply_coupon:function(){var s,c,f,r,_,d,h;this.coupon?(w("body").block({message:null,overlayCSS:{background:"#F1F1F1",opacity:.6}}),this.coupon_id=this.coupon.id,s=this.type,c=this.value,f=this.applies_to_setup_fee,r=this.setup_fee_discount_value,_=this.setup_fee_discount_type,d=w.parseJSON(this.allowed_plans),h=w.parseJSON(this.allowed_freqs),w(".superscript").show(),w("h5 sub").show(),setTimeout(function(){w(".wu-plan").each(function(){w(this).find(".old-price").get(0)||w(this).find("h4").after('<div class="old-price">--</div>');var e=w(this).data("plan");let t=!1,a=!1;if("object"==typeof d)for(var o of d)parseInt(o)==e&&(t=!0);else t=!0;if("object"==typeof h)for(var p of h)p==w("#wu_plan_freq").val()&&(a=!0);else a=!0;if(t)if(a){w(".old-price").show(),w(".off-value").show();let e=0;var i=(n=(e=>("number"==typeof e&&(e=e.toString()),parseFloat(e.replace(wpu.thousand_separator,"").replace(wpu.decimal_separator,"."))))(w(this).data("price-"+w("#wu_plan_freq").val())))*jQuery("#wu_plan_freq").val();let t=0;var l,n,u=w(this).find(".pricing-table-setupfee")?w(this).find(".pricing-table-setupfee").attr("data-value"):0;let a=0,o="";o='"absolute"'!=s?"".concat(c,"%"):accounting.formatMoney(parseFloat(c)),w(this).find(".old-price").html(accounting.formatMoney(parseFloat(n))),w(this).find(".off-value").get(0)||w(this).find(".old-price").after('<div class="off-value">('+o+" "+wu_coupon_data.off_text+")</div>"),f&&(setupfee_off_with_symbol='"absolute"'!=_?"".concat(r,"%"):accounting.formatMoney(parseFloat(r)),w(this).find(".setupfee-off-value").get(0)||w(this).find(".pricing-table-setupfee").after('<span class="setupfee-off-value"> ('+setupfee_off_with_symbol+" "+wu_coupon_data.off_text+")</span>")),t='"absolute"'!=s?(e=n*((100-c)/100),(100-c)/100*i):(e=1<jQuery("#wu_plan_freq").val()?(n*jQuery("#wu_plan_freq").val()-parseFloat(c))/jQuery("#wu_plan_freq").val():n-parseFloat(c),i-parseFloat(c)),a=f?'"absolute"'!=_?u*((100-r)/100):u-parseFloat(r):u,0<t?(n=this,i=t,u=jQuery("#wu_plan_freq").val(),(l=jQuery(n).find(".total-price.total-price-"+u).html())&&(l=l.split(","),i=accounting.formatMoney(parseFloat(i))+", "+l[1],jQuery(n).find(".total-price.total-price-"+u).html(i))):w(this).find(".total-price.total-price-"+w("#wu_plan_freq").val()).html(" "+wu_coupon_data.free_text),0<a?(l=a,jQuery(this).find(".pricing-table-setupfee").html(accounting.formatMoney(l))):w(this).find(".pricing-table-setupfee").html(" "+wu_coupon_data.no_setup_fee_text),0<e?(w(this).find(".plan-price").html(accounting.formatMoney(parseFloat(e))),-1!==w(this).find(".plan-price").html().indexOf(wpu.currency_symbol)&&w(this).find(".plan-price").html(w(this).find(".plan-price").html().replace(wpu.currency_symbol,""))):(w(this).find(".plan-price").html(" "+wu_coupon_data.free_text),(n=w(this).find("h5")).find("sub").hide(),n.find(".superscript").hide()),w("body").unblock()}else w("body").unblock(),w(".old-price").hide(),w(".off-value").hide();else w("body").unblock()})},400)):(w(".old-price").hide(),this.coupon_id="",w(".wu-plan").each(function(){var e=w(this).data("price-"+w("#wu_plan_freq").val());w(this).find(".plan-price").html(e)}))}}})})(jQuery);
