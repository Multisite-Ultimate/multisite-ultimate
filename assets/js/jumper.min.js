(u=>{u(document).ready(function(){let t=u("#wu-jumper-select").selectize({create:!1,maxItems:1,optgroupField:"group",optgroupValueField:"value",searchField:["text","name","display_name","domain","title","desc","code"],render:{option(e){void 0===e.model&&(e.model="jumper-link"),void 0===e.text&&(e.text=e.reference_code||e.name||e.title||e.display_name||e.code),void 0===e.group&&(e.group=e.model);var t=(jQuery("#wu-template-"+e.model).length?jQuery("#wu-template-"+e.model):jQuery("#wu-template-default")).html();return _.template(t,{interpolate:/\{\{(.+?)\}\}/g})(e)}},load(e,t){if(!e.length)return t();u("#wu-jumper .wu-jumper-loading").show(),jQuery.ajax({url:wu_jumper_vars.ajaxurl,type:"POST",data:{action:"wu_search",model:"all",number:99,query:{search:"*"+e+"*"}},error(){t()},success(e){u("#wu-jumper .wu-jumper-loading").hide(),t(e)}})}});t.on("change",function(){var e;0<=(e=u(this).val()).toLowerCase().indexOf(wu_jumper_vars.base_url)||0<=e.toLowerCase().indexOf(wu_jumper_vars.network_base_url)?(window.location.href=u(this).val(),u(this).parent().parent().find(".wu-jumper-redirecting").show()):(window.open(u(this).val(),"_blank"),u(t.parent()).hide())}),u(document).on("click",":not(#wu-jumper-button-trigger)",function(e){e=e.target;"wu-jumper-button-trigger"===u(e).attr("id")||"wu-jumper-button-trigger"===u(e).parent().attr("id")||u(e).is(t.parent())||u(e).parents().is(t.parent())||u(t.parent().parent()).hide()});var e=wu_jumper_vars.trigger_key.charAt(0);function r(){u("#wu-jumper").show(),u("#wu-jumper").find("input").focus()}Mousetrap.bind(["command+option+"+e,"ctrl+alt+"+e],function(e){e.preventDefault(),r()}),u(document).on("click","#wu-jumper-button-trigger",function(e){e.preventDefault(),r()})})})(jQuery);
