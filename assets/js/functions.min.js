function wu_on_load(){wu_initialize_tooltip(),wu_initialize_datepickers(),wu_initialize_colorpicker(),wu_initialize_iconfontpicker(),wu_initialize_editors(),wu_update_clock(),wu_initialize_clipboardjs(),wu_initialize_imagepicker(),wu_image_preview()}function wu_format_money(e){e=parseFloat(e.toString().replace(/[^0-9\.]/g,""));var i=wp.hooks.applyFilters("wu_format_money",{currency:{symbol:wu_settings.currency_symbol,format:wu_settings.currency_position,decimal:wu_settings.decimal_separator,thousand:wu_settings.thousand_separator,precision:wu_settings.precision},number:{precision:0,thousand:",",decimal:","}});return accounting.settings=i,accounting.formatMoney(e)}window.wu_initialize_tooltip=function(){jQuery('[role="tooltip"]').tipTip({attribute:"aria-label"})},window.wu_initialize_editors=function(){jQuery("textarea[data-editor]").each(function(){tinymce.remove("#"+jQuery(this).attr("id")),tinymce.init({selector:"#"+jQuery(this).attr("id"),menubar:"",theme:"modern",...wp.editor.getDefaultSettings().tinymce})})},window.wu_initialize_imagepicker=function(){jQuery(".wu-wrapper-image-field").each(function(){let t=jQuery(this);t.find("img").css({maxWidth:"100%"}),(t.find("img").attr("src")?t.find(".wu-wrapper-image-field-upload-actions"):t.find(".wu-add-image-wrapper")).show(),t.on("click","a.wu-add-image",function(){"undefined"!=typeof wu_media_frame||(wu_media_frame=wp.media({title:wu_fields.l10n.image_picker_title,multiple:!1,button:{text:wu_fields.l10n.image_picker_button_text}})).on("select",function(){var e=wu_media_frame.state().get("selection").first().toJSON(),i=t.find("img");t.find("img").removeClass("wu-absolute").attr("src",e.url),t.find(".wubox").attr("href",e.url),t.find("input").val(e.id),t.find(".wu-add-image-wrapper").hide(),i.on("load",function(){t.find(".wu-wrapper-image-field-upload-actions").show()})}),wu_media_frame.open()}),t.find(".wu-remove-image").on("click",function(e){e.preventDefault(),t.find("img").removeAttr("src").addClass("wu-absolute"),t.find("input").val(""),t.find(".wu-wrapper-image-field-upload-actions").hide(),t.find(".wu-add-image-wrapper").show()})})},window.wu_initialize_colorpicker=function(){jQuery(document).ready(function(){jQuery(".wu_color_field").each(function(){jQuery(this).wpColorPicker()})})},window.wu_initialize_iconfontpicker=function(){jQuery(document).ready(function(){jQuery(".wu_select_icon").length&&jQuery(".wu_select_icon").fontIconPicker({theme:"wu-theme"})})},window.wu_initialize_clipboardjs=function(){new ClipboardJS(".wu-copy")},window.wu_initialize_datepickers=function(){jQuery(".wu-datepicker, [wu-datepicker]").each(function(){var e=jQuery(this),i=e.data("format"),t=e.data("allow-time");e.flatpickr({animate:!1,time_24hr:!0,enableTime:void 0===t||t,dateFormat:i,allowInput:!0,defaultDate:e.val()})})},window.wu_update_clock=function(){let u=60*(60*wu_ticker.server_clock_offset+(new Date).getTimezoneOffset())*1e3;function e(){var e=new Date((new Date).getTime()+u),i=e.getFullYear();let t=e.getMonth()+1,n=e.getDate(),o=e.getHours(),a=e.getMinutes(),r=e.getSeconds();t<10&&(t="0"+t),n<10&&(n="0"+n),a<10&&(a="0"+a),r<10&&(r="0"+r),o<10&&(o="0"+o),jQuery("#wu-ticker").text(i+"-"+t+"-"+n+" "+o+":"+a+":"+r)}setInterval(e,500)},window.wu_on_load=wu_on_load,window.wu_block_ui=function(e){jQuery(e).wu_block({message:'<div class="spinner is-active wu-float-none" style="float: none !important;"></div>',overlayCSS:{backgroundColor:"#FFF",opacity:.6},css:{padding:0,margin:0,width:"50%",fontSize:"14px !important",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"none",backgroundColor:"none",cursor:"wait"}});var i=jQuery(e);return i.unblock=jQuery(e).wu_unblock,i},window.wu_image_preview=function(){let t="#wu-image-preview";var e=1==wu_settings.disable_image_zoom?".wu-image-preview:not(img)":".wu-image-preview",i=t.replace("#","");0===jQuery(t).length&&jQuery("body").append("<div id='"+i+"' class='wu-rounded wu-p-1 wp-ui-primary' style='max-width: 600px; display: none; z-index: 9999999;'><img class='wu-rounded wu-block wu-m-0 wu-p-0 wu-bg-gray-100' style='max-width: 100%;' src='' alt=''></div>"),jQuery(e).hover(function(e){this.t=this.title,this.title="";var i=jQuery(this).data("image");jQuery(t).find("img").attr("src",i).attr("alt",this.t).end().css({position:"absolute",display:"none"}).css("top",e.pageY-10+"px").css("left",e.pageX+30+"px").fadeIn("fast")},function(){this.title=this.t,jQuery(t).fadeOut("fast")}),jQuery(e).mousemove(function(e){jQuery(t).css("top",e.pageY-10+"px").css("left",e.pageX+30+"px")})},window.wu_initialize_code_editors=function(){jQuery("[data-code-editor]").length&&(void 0===window.wu_editor_instances&&(window.wu_editor_instances={}),jQuery("[data-code-editor]").each(function(){var e=jQuery(this),i=e.attr("id");void 0===window.wu_editor_instances[i]&&e.is(":visible")&&(window.wu_editor_instances[i]=wp.codeEditor.initialize(i,{codemirror:{mode:e.data("code-editor"),lint:!0,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:2,indentWithTabs:!0,lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,continueComments:!0,inputStyle:"contenteditable",direction:"ltr",gutters:[],extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Alt-F":"findPersistent"}}}))}))},window.wu_moment=function(e){return moment.tz(e,"Etc/UTC")};
