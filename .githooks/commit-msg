#!/bin/bash

# Commit message hook for enforcing conventional commit format
# This hook validates commit message format

commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}'

error_msg="Aborting commit. Your commit message is missing either a type of change or the description of changes."

if ! grep -qE "$commit_regex" "$1"; then
    echo "$error_msg" >&2
    echo "" >&2
    echo "Valid format: <type>(<scope>): <subject>" >&2
    echo "Example: feat(auth): add login functionality" >&2
    echo "" >&2
    echo "Valid types: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert" >&2
    echo "" >&2
    echo "To bypass this check, use: git commit --no-verify" >&2
    exit 1
fi